{"pageProps":{"post":{"title":"ブログを作った","date":"2023-01-03","slug":"hello","content":"<h2 id=\"概要\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#概要\"><span class=\"icon icon-link\"></span></a>概要</h2>\n<p>タイトルの通り、ブログを作ってみました。\n特に何か書いていこうという気概はそこまでないです。\nNext.js を使って Markdown をパースするという最近流行り(?)の構成です。</p>\n<h2 id=\"作成の背景\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#作成の背景\"><span class=\"icon icon-link\"></span></a>作成の背景</h2>\n<p>僕は普段アルバイトやら学業やらでコードを書いているんですが、フロントエンドの経験が浅いので作りました。\nアルバイトでたまに Vue2 系を書くだけで、Next.js どころか React もほぼ初心者です。</p>\n<h2 id=\"参考にしたもの\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#参考にしたもの\"><span class=\"icon icon-link\"></span></a>参考にしたもの</h2>\n<p>以下のテンプレートをガッツリ参考にしました。\n少しググれば情報が手に入る世の中で本当に助かります。</p>\n<p><a href=\"https://github.com/sub-t/blog-template\">参考リポジトリ</a></p>\n<h2 id=\"参考のものと違う点\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#参考のものと違う点\"><span class=\"icon icon-link\"></span></a>参考のものと違う点</h2>\n<p>ほとんど変えてないのですが、Next.js のアップデートに伴い<code>next/link</code>を使う部分に手を入れました。\n入れ子になっている a タグが不要になっています。</p>\n<p>変更前</p>\n<pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">passHref</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>a</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>foobar<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">foobar</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span>\n</code></pre>\n<p>変更後</p>\n<pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">passHref</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>foobar<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  foobar\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span>\n</code></pre>\n<p>なお、僕の環境だと a タグが残っていたままだとエラーを吐いていました。</p>\n<p>Error: Invalid  with  child.\nPlease remove  or use .\nLearn more: <a href=\"https://nextjs.org/docs/messages/invalid-new-link-with-extra-anchor\">https://nextjs.org/docs/messages/invalid-new-link-with-extra-anchor</a></p>\n<p>以下の記事で公式からも情報が出ています。</p>\n<p><a href=\"https://nextjs.org/blog/next-13\">公式ブログ</a></p>\n<p>v13.x から更新されたようで、アップグレードする際の対応策も記述があります。</p>\n<p>The next/link child can no longer be .\nAdd the legacyBehavior prop to use the legacy behavior or remove the  to upgrade.\nA codemod is available to automatically upgrade your code.</p>\n<p>素直に a タグを削除するなり、<code>legacyBehavior</code>プロパティを追加してあげるなりするといいみたいです。</p>","tags":["React","Next.js"]}},"__N_SSG":true}